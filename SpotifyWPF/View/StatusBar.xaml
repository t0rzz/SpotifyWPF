<UserControl x:Class="SpotifyWPF.View.StatusBar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:SpotifyWPF.View"
             xmlns:conv="clr-namespace:SpotifyWPF.View.Converters"
             mc:Ignorable="d"
             d:DesignHeight="40" d:DesignWidth="800"
             Background="#181818"
             BorderBrush="#333333"
             BorderThickness="0,1,0,0">

    <UserControl.Resources>
        <!-- Device Type to Icon Converter -->
        <conv:DeviceTypeToIconConverter x:Key="DeviceTypeToIconConverter"/>
        <!-- Enhanced Status Bar Text Style -->
        <Style x:Key="StatusBarTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="Margin" Value="12,0,0,0"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
        </Style>

        <!-- Enhanced Device Icon Style -->
        <Style x:Key="DeviceIconStyle" TargetType="Viewbox">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Stretch" Value="Uniform"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="16,0,12,0"/>
        </Style>

        <!-- Device Icon Path Styles -->
        <Style x:Key="PhoneIcon" TargetType="Path">
            <Setter Property="Data" Value="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"/>
            <Setter Property="Fill" Value="#1DB954"/>
        </Style>

        <Style x:Key="ComputerIcon" TargetType="Path">
            <Setter Property="Data" Value="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.89-2-2-2H4c-1.11 0-2 .9-2 2v10c0 1.1.89 2 2 2H0v2h24v-2h-4zM4 16V6h16v10H4z"/>
            <Setter Property="Fill" Value="#1DB954"/>
        </Style>

        <Style x:Key="SpeakerIcon" TargetType="Path">
            <Setter Property="Data" Value="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            <Setter Property="Fill" Value="#1DB954"/>
        </Style>

        <Style x:Key="TVIcon" TargetType="Path">
            <Setter Property="Data" Value="M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5v2h8v-2h5c1.1 0 1.99-.9 1.99-2L23 5c0-1.1-.9-2-2-2zm0 14H3V5h18v12z"/>
            <Setter Property="Fill" Value="#1DB954"/>
        </Style>

        <Style x:Key="GenericDeviceIcon" TargetType="Path">
            <Setter Property="Data" Value="M12 2C13.1 2 14 2.9 14 4V8C14 9.1 13.1 10 12 10H11V12H14V14H9V10H12C12.55 10 13 9.55 13 9V5C13 4.45 12.55 4 12 4H11V2H12ZM4 4C4 2.9 4.9 2 6 2H7V4H6C5.45 4 5 4.45 5 5V9C5 9.55 5.45 10 6 10H7V12H4V14H9V10H6C4.9 10 4 9.1 4 8V4Z"/>
            <Setter Property="Fill" Value="#B3B3B3"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <!-- Device Status -->
        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
            <!-- Device Icon with Device-Type Based Styling -->
            <Viewbox Style="{StaticResource DeviceIconStyle}"
                     Visibility="{Binding CurrentDevice, Converter={StaticResource DeviceTypeToIconConverter}, ConverterParameter=show}">
                <Canvas Width="24" Height="24">
                    <!-- Computer Icon -->
                    <Path x:Name="ComputerPath" Style="{StaticResource ComputerIcon}"
                          Visibility="{Binding CurrentDevice.Type, Converter={StaticResource DeviceTypeToIconConverter}, ConverterParameter=computer}"/>

                    <!-- Smartphone Icon -->
                    <Path x:Name="PhonePath" Style="{StaticResource PhoneIcon}"
                          Visibility="{Binding CurrentDevice.Type, Converter={StaticResource DeviceTypeToIconConverter}, ConverterParameter=smartphone}"/>

                    <!-- Tablet Icon -->
                    <Path x:Name="TabletPath" Style="{StaticResource PhoneIcon}"
                          Visibility="{Binding CurrentDevice.Type, Converter={StaticResource DeviceTypeToIconConverter}, ConverterParameter=tablet}"/>

                    <!-- Speaker Icon -->
                    <Path x:Name="SpeakerPath" Style="{StaticResource SpeakerIcon}"
                          Visibility="{Binding CurrentDevice.Type, Converter={StaticResource DeviceTypeToIconConverter}, ConverterParameter=speaker}"/>

                    <!-- TV Icon -->
                    <Path x:Name="TVPath" Style="{StaticResource TVIcon}"
                          Visibility="{Binding CurrentDevice.Type, Converter={StaticResource DeviceTypeToIconConverter}, ConverterParameter=tv}"/>

                    <!-- Generic Device Icon (fallback) -->
                    <Path x:Name="GenericPath" Style="{StaticResource GenericDeviceIcon}"
                          Visibility="{Binding CurrentDevice.Type, Converter={StaticResource DeviceTypeToIconConverter}, ConverterParameter=generic}"/>
                </Canvas>
            </Viewbox>

            <!-- Device Name Text -->
            <TextBlock Text="{Binding CurrentDeviceText}"
                       Style="{StaticResource StatusBarTextStyle}"/>
        </StackPanel>
    </Grid>
</UserControl>